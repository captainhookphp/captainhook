<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>CaptainHook Documentation</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/layout.css" rel="stylesheet">
    <link href="css/darcula.css" rel="stylesheet">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://github.com/captainhookphp/captainhook">CaptainHook</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="install.html">Install</a></li>
            <li><a href="configure.html">Configure</a></li>
            <li><a href="hooks.html">Hooks</a></li>
            <li><a href="extend.html">Extend</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container theme-showcase" role="main">

      <a name="installation"></a>
      <h1>Installation</h1>
      <p>
        The easiest way to install <em>CaptainHook</em> is by using composer. You can either edit your
        composer.json manually and put <em class="hl">"captainhook/captainhook": "^4.0"</em> in your
        <em class="hl">require-dev</em> package list, or run the following command.
      </p>
      <pre><code class="bash">$ composer require --dev captainhook/captainhook</code></pre>
      <p>
        This will install the package itself and a bin-script to you composer bin directory, usually located under
        <em class="hl">vendor/bin</em>.<br>
        Next, you have to create a configuration file, to define the actions you want to execute for
        each git hook. You can either use a sample configuration from the documentation, or create one by running
        the following command. Be aware, that if you changed your composer bin directory, you have to adjust the path.
      </p>
      <pre><code class="bash">$ vendor/bin/captainhook configure</code></pre>
      <p>
        While executing this, <em>CaptainHook</em> will ask you a series of questions to create a valid configuration
        file for you.
      </p>
      <p>
        After creating the configuration file, there is only one step left to finish the installation.
        You have to activate the hooks in your local git repository. To do so, just run the following command.
      </p>
      <pre><code class="bash">$ vendor/bin/captainhook install</code></pre>
      <p>
        Executing this will create the hook script located in your <em class="hl">.git/hooks</em> directory, for each hook
        you choose to install while running the command. So now every time git triggers a hook,
        <em>CaptainHook</em> gets executed.
      </p>
      <p class="pirate">
        AYE! Ye have successfully installed <em>CaptainHook</em> to handle yer git hooks. Want to know how to set sail?
        Have a closer look at thee <a href="configure.html">configuration file</a> to setup yer git hooks.
      </p>

      <h2>Composer integration</h2>
      <p>
        If you do not want to handle the <em>configuration</em> and <em>install</em> command manually you can use the
        <em>CaptainHook</em> Composer plugin that handles all of this automatically.
      </p>
      <pre><code class="bash">$ composer require --dev captainhook/plugin-composer</code></pre>
      <p>
        Installing the plugin <em>CaptainHook</em> gets installed. If you do not have a <em>captainhook.json</em>
        file <em>CaptainHook</em>is guiding you through the configuration process by asking some yes or no questions.
        After finishing the configuration the plugin will activate the hooks automatically.
      </p>
      <p>
        Another advantage using the Composer plugin is that after every composer install or update command
        <em>CaptainHook</em> makes sure the hooks are activated. This ensures your whole team can use the same hooks.
      </p>
      <p>
        You can still ensure the hook activation without using the Composer plugin. To do so you have to add the
        following lines to your composer.json
      </p>
      <pre><code class="javascript">{
  "scripts": {
    "post-autoload-dump": "\\CaptainHook\\App\\Composer\\Cmd::setup"
  }
}</code></pre>

      <a name="docker"></a>
      <h2>Using Docker</h2>
      <p>
        If you don't have PHP installed locally or you have installed a different version, you can use Docker to
        execute CaptainHook. To do so you have to install the hooks a bit differently.
      </p>
      <pre><code class="bash">$ vendor/bin/captainhook install --run-mode=docker --run-exec="docker exec CONTAINER_NAME"</code></pre>
      <p>
        You can choose your preferred docker command e.g.:
      </p>
      <ul>
        <li>docker exec MY_CONTAINER_NAME</li>
        <li>docker run --rm -v $(pwd):/var/www/html MY_IMAGE_NAME</li>
        <li>docker-compose -f docker/docker-compose.yml run --rm MY_SERVICE_NAME</li>
      </ul>
      <p>
        If you are using the composer plugin or just dont't want to provide the settings via cli option you can
        configure the settings in the "config" section of your <em>captainhook.json</em>.
      </p>
      <pre><code class="javascript">{
  "config": {
    "run-mode": "docker",
    "run-exec": "docker exec CONTAINER_NAME"
  }
  "pre-commit": {
    ...
  }
}</code></pre>

      <h2>A word of warning</h2>
      <p class="pirate">
        Don't ye forget it is still possible to commit without invoking thee hooks. Make sure ye run
        appropriate backend-sanity checks on yer code, so yer hearties don't break anything AYE!!!
      </p>

    </div>

    <footer class="footer">
      <div class="container">
        <p>
          Found a typo or a bug?
          Please open an <a href="https://github.com/captainhookphp/captainhook/issues">issue</a>
          or pull request for the <em>gh-pages</em>
          branch of <a href="https://github.com/captainhookphp/captainhook/tree/gh-pages">CaptainHook</a>
        </p>
        <p>
          &copy; <a href="https://github.com/sebastianfeldmann">Sebastian Feldmann</a>
        </p>
      </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
